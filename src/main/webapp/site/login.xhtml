<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="description" content=""/>
        <meta name="author" content=""/>
        <meta name="keyword" content=""/>

        <title>jERP - PROJETOS</title>
        <!-- Bootstrap core CSS -->
        <link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/resources/assets/css/bootstrap.css" />
        <!--external css-->
        <link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/resources/assets/font-awesome/css/font-awesome.css" />

        <!-- Custom styles for this template -->
        <link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/resources/assets/css/style.css" />
        <link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/resources/assets/css/style-responsive.css" />

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
    </h:head>
    <h:body id="body-login-page">
        <div id="login-page">
            <div class="container">
                <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
                <p:dialog appendTo="right,bottom" widgetVar="statusDialog" draggable="false" closable="false" resizable="false" showHeader="false" >
                    <img alt="" src="#{facesContext.externalContext.requestContextPath}/resources/assets/img/spinner1.gif" height="70px" />
                </p:dialog>
                <h:form styleClass="form-login">
                    <h2 class="form-login-heading">SESC-SC</h2>
                    <div class="login-wrap"> 
                        <b:messages id="mMessageErro"/>
                        <div class="form-group">
                            <label for="username">Usuário</label>
                            <p:inputText placeholder="Digite seu usuário" id="username" 
                                         value="#{userMB.user.login}" styleClass="form-control" />
                        </div>
                        <div class="form-group">
                            <label for="j_password">Senha </label> 
                            <p:password placeholder="Digite sua senha" id="password" 
                                        value="#{userMB.user.password}" styleClass="form-control" />
                            <a data-toggle="modal" class="pull-right" style="margin: 5px 0 25px 0; color: #FF6C60;" href="/site/login.html#myModal">Lembrar minha senha.</a>
                        </div>                  
                        <div class="form-group">
                            <p:commandButton value="Acessar Sistema" styleClass="btn btn-theme btn-block" 
                                             icon="fa fa-lock"
                                             action="#{userMB.doLogin}" update="mMessageErro" ></p:commandButton>            
                        </div>
                    </div>

                    <!-- Modal Recupera senha-->
                    <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button>
                                    <h4 class="modal-title">Esqueceu sua senha?</h4>
                                </div>
                                <div class="modal-body">
                                    <b:messages id="mMessageErroRecuperaSenha"/>
                                    <p>Digite o e-mail que você você deseja alterar a senha.</p>
                                    <p:inputText id="email" placeholder="E-mail" autocomplete="off" 
                                                 value="#{userMB.profile.email}" styleClass="form-control placeholder-no-fix" />
                                </div>
                                <div class="modal-footer">
                                    <button data-dismiss="modal" class="btn btn-default" type="button">Cancelar</button>
                                    <p:commandButton value="Recuperar Senha" styleClass="btn btn-theme" 
                                                     action="#{userMB.doRecuperarSenha}" update="mMessageErroRecuperaSenha" ></p:commandButton> 
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- modal -->
                </h:form>
            </div>
        </div>

        <!-- js placed at the end of the document so the pages load faster -->
        <script type="text/javascript"
        src="#{facesContext.externalContext.requestContextPath}/resources/assets/js/jquery.js"></script>
        <script type="text/javascript"
        src="#{facesContext.externalContext.requestContextPath}/resources/assets/js/bootstrap.min.js"></script>

        <!--BACKSTRETCH-->
        <!-- You can use an image of whatever size. This script will stretch to fit in any screen size.-->
        <script type="text/javascript"
        src="#{facesContext.externalContext.requestContextPath}/resources/assets/js/jquery.backstretch.min.js"></script>
    </h:body>
</html>
